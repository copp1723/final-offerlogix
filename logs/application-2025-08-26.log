{"timestamp":"2025-08-26 08:20:54.931","level":"warn","message":"Invalid leadId provided to hashToBucket","correlationId":"no-correlation","service":"mailmind-api","environment":"test","leadId":""}
{"timestamp":"2025-08-26 08:20:54.932","level":"warn","message":"Invalid leadId provided to hashToBucket","correlationId":"no-correlation","service":"mailmind-api","environment":"test","leadId":null}
{"timestamp":"2025-08-26 08:20:54.940","level":"warn","message":"Invalid template provided","correlationId":"no-correlation","service":"mailmind-api","environment":"test","template":null,"leadId":"lead-test"}
{"timestamp":"2025-08-26 08:37:58.637","level":"info","message":"ðŸ›‘ Received SIGTERM, shutting down gracefully","correlationId":"no-correlation","service":"mailmind-api","environment":"development","component":"server","operation":"shutdown","signal":"SIGTERM"}
{"timestamp":"2025-08-26 08:52:18.422","level":"warn","message":"Webhook signature verification failed","correlationId":"no-correlation","service":"mailmind-api","environment":"production","expected":"26b194c6eb27a8df631636121e20f377371d286901250510777f2a1e129de87d","received":"test-signature"}
{"timestamp":"2025-08-26 08:56:07.764","level":"warn","message":"Webhook signature verification failed","correlationId":"no-correlation","service":"mailmind-api","environment":"production","expected":"b6d023a842f14b66e98287c993f60d1f918bb85a407775673788a53de5c15e44","received":"test-signature"}
{"timestamp":"2025-08-26 09:16:01.407","level":"warn","message":"Webhook timestamp too old","correlationId":"no-correlation","service":"mailmind-api","environment":"production","now":1756217761,"difference":31535761}
{"timestamp":"2025-08-26 09:16:21.153","level":"warn","message":"Webhook signature verification failed","correlationId":"no-correlation","service":"mailmind-api","environment":"production","expected":"7a631c1103e29fe95fc9edf3ec34d604a233780c6b42a8ce209dbd37c1827669","received":"test-signature"}
{"timestamp":"2025-08-26 09:17:06.872","level":"warn","message":"Webhook signature verification failed","correlationId":"no-correlation","service":"mailmind-api","environment":"production","expected":"7a631c1103e29fe95fc9edf3ec34d604a233780c6b42a8ce209dbd37c1827669","received":"test-signature"}
{"timestamp":"2025-08-26 09:18:04.552","level":"warn","message":"Webhook signature verification failed","correlationId":"no-correlation","service":"mailmind-api","environment":"development","expected":"7a631c1103e29fe95fc9edf3ec34d604a233780c6b42a8ce209dbd37c1827669","received":"test-signature"}
{"timestamp":"2025-08-26 09:18:04.553","level":"warn","message":"Development mode: allowing webhook despite signature mismatch","correlationId":"no-correlation","service":"mailmind-api","environment":"development"}
{"timestamp":"2025-08-26 09:18:05.357","level":"info","message":"Conversation state transition requested","correlationId":"no-correlation","service":"mailmind-api","environment":"development","conversationId":"e9e8551a-ee37-4160-ad62-e8112c906bc8","event":"lead_replied","triggeredBy":"system","metadata":{"messageId":"6b507b21-02ff-4750-910e-1fb97209927a","content":"I'm interested in scheduling a test drive for the Honda Civic. When would be a good time to come in?"}}
{"timestamp":"2025-08-26 09:18:05.763","level":"error","message":"State transition failed","correlationId":"no-correlation","service":"mailmind-api","environment":"development","conversationId":"e9e8551a-ee37-4160-ad62-e8112c906bc8","error":{"length":469,"name":"error","severity":"ERROR","code":"23514","detail":"Failing row contains (e9e8551a-ee37-4160-ad62-e8112c906bc8, null, null, Re: Your Toyota Camry Could Be Worth More Than You Think! ðŸš—, engaged, high, 2025-08-25 14:35:10.148, 2025-08-26 14:18:05.773911, 8d67140f-b548-44c2-bbba-8f42efb9457a, null).","schema":"public","table":"conversations","constraint":"conversations_status_values_check","file":"execMain.c","line":"2058","routine":"ExecConstraints"},"errorName":"error","errorMessage":"new row for relation \"conversations\" violates check constraint \"conversations_status_values_check\"","stackTrace":"error: new row for relation \"conversations\" violates check constraint \"conversations_status_values_check\"\n    at /Users/joshcopp/Desktop/Swarm/MailMind/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/joshcopp/Desktop/Swarm/MailMind/node_modules/src/node-postgres/session.ts:104:19)\n    at async DatabaseStorage.updateConversation (/Users/joshcopp/Desktop/Swarm/MailMind/server/storage.ts:444:35)\n    at async ConversationStateManager.transitionState (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/ConversationStateManager.ts:264:7)\n    at async MessageThreadingService.handleMessageStateUpdates (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/MessageThreadingService.ts:458:9)\n    at async MessageThreadingService.processMessage (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/MessageThreadingService.ts:88:7)\n    at async InboundEmailService.handleInboundEmail (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/inbound-email.ts:85:23)\n    at async file:///Users/joshcopp/Desktop/Swarm/MailMind/test-webhook.js:22:5"}
{"timestamp":"2025-08-26 09:18:05.911","level":"info","message":"Conversation state transition requested","correlationId":"no-correlation","service":"mailmind-api","environment":"development","conversationId":"e9e8551a-ee37-4160-ad62-e8112c906bc8","event":"qualification_criteria_met","triggeredBy":"system","metadata":{"messageId":"6b507b21-02ff-4750-910e-1fb97209927a","qualificationReason":"test_drive_request"}}
{"timestamp":"2025-08-26 09:18:05.984","level":"warn","message":"No state transition defined for event from state","correlationId":"no-correlation","service":"mailmind-api","environment":"development","conversationId":"e9e8551a-ee37-4160-ad62-e8112c906bc8","event":"qualification_criteria_met","currentState":"active"}
{"timestamp":"2025-08-26 09:18:05.984","level":"info","message":"Inbound lead message stored","correlationId":"no-correlation","service":"mailmind-api","environment":"development","leadId":"8d67140f-b548-44c2-bbba-8f42efb9457a","messageId":"test-message-id@onekeel.ai","conversationId":"e9e8551a-ee37-4160-ad62-e8112c906bc8"}
{"timestamp":"2025-08-26 09:41:19.126","level":"info","message":"Conversation state transition requested","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","event":"lead_replied","triggeredBy":"system","metadata":{"messageId":"90509bd3-1eea-4835-b024-d5373a3825b5","content":"Hi there!\n\nThanks for reaching out about the Honda Civic. I'm definitely interested in learning more!\n\nI've been looking for a reliable, fuel-efficient car and the Civic sounds like exactly what I need. I love that it has the latest safety features too.\n\nCould you tell me:\n1. What trim levels do you have available?\n2. What kind of incentives are currently offered?\n3. When would be a good time to schedule a test drive?\n\nI'm particularly interested in the hybrid version if you have any on the lot.\n\nLooking forward to hearing from you soon!\n\nBest,\nJosh"}}
{"timestamp":"2025-08-26 09:41:19.509","level":"error","message":"State transition failed","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","error":{"length":473,"name":"error","severity":"ERROR","code":"23514","detail":"Failing row contains (741a9d16-5cfc-4010-b94b-bc4a85690a05, ccc9d43b-cf58-49f1-89e1-2fc366468dac, null, Re: Test Campaign - Reply Testing, engaged, normal, 2025-08-25 20:54:29.37, 2025-08-26 14:41:19.491243, eae6bc8b-46d0-46e0-a585-e268fab4304c, null).","schema":"public","table":"conversations","constraint":"conversations_status_values_check","file":"execMain.c","line":"2058","routine":"ExecConstraints"},"errorName":"error","errorMessage":"new row for relation \"conversations\" violates check constraint \"conversations_status_values_check\"","stackTrace":"error: new row for relation \"conversations\" violates check constraint \"conversations_status_values_check\"\n    at /Users/joshcopp/Desktop/Swarm/MailMind/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/joshcopp/Desktop/Swarm/MailMind/node_modules/src/node-postgres/session.ts:104:19)\n    at async DatabaseStorage.updateConversation (/Users/joshcopp/Desktop/Swarm/MailMind/server/storage.ts:444:35)\n    at async ConversationStateManager.transitionState (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/ConversationStateManager.ts:264:7)\n    at async MessageThreadingService.handleMessageStateUpdates (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/MessageThreadingService.ts:458:9)\n    at async MessageThreadingService.processMessage (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/MessageThreadingService.ts:88:7)\n    at async InboundEmailService.handleInboundEmail (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/inbound-email.ts:85:23)\n    at async simulateReplyWebhook (/Users/joshcopp/Desktop/Swarm/MailMind/simulate-reply-webhook.js:163:5)"}
{"timestamp":"2025-08-26 09:41:19.657","level":"info","message":"Conversation state transition requested","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","event":"qualification_criteria_met","triggeredBy":"system","metadata":{"messageId":"90509bd3-1eea-4835-b024-d5373a3825b5","qualificationReason":"appointment_request"}}
{"timestamp":"2025-08-26 09:41:19.732","level":"warn","message":"No state transition defined for event from state","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","event":"qualification_criteria_met","currentState":"active"}
{"timestamp":"2025-08-26 09:41:19.733","level":"info","message":"Inbound lead message stored","correlationId":"no-correlation","service":"mailmind-api","environment":"production","leadId":"eae6bc8b-46d0-46e0-a585-e268fab4304c","messageId":"reply-1756219278416@atsglobal.ai","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05"}
{"timestamp":"2025-08-26 09:51:10.520","level":"info","message":"ðŸ›‘ Received SIGTERM, shutting down gracefully","correlationId":"no-correlation","service":"mailmind-api","environment":"development","component":"server","operation":"shutdown","signal":"SIGTERM"}
{"timestamp":"2025-08-26 09:54:38.129","level":"info","message":"ðŸ›‘ Received SIGTERM, shutting down gracefully","correlationId":"no-correlation","service":"mailmind-api","environment":"development","component":"server","operation":"shutdown","signal":"SIGTERM"}
{"timestamp":"2025-08-26 12:32:47.563","level":"info","message":"Conversation state transition requested","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","event":"lead_replied","triggeredBy":"system","metadata":{"messageId":"6fcc0dd3-d06a-4265-8272-9801ac993258","content":"Hi, I am very interested in the Honda Civic. Can you please provide me with pricing information and schedule a test drive? This is urgent as I need to make a decision soon."}}
{"timestamp":"2025-08-26 12:32:47.653","level":"warn","message":"No state transition defined for event from state","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","event":"lead_replied","currentState":"qualified"}
{"timestamp":"2025-08-26 12:32:47.810","level":"info","message":"Conversation state transition requested","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","event":"engagement_increased","triggeredBy":"system","metadata":{"messageId":"6fcc0dd3-d06a-4265-8272-9801ac993258","engagementScore":100}}
{"timestamp":"2025-08-26 12:32:47.885","level":"warn","message":"Invalid conversation state transition","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","fromState":"qualified","attemptedState":"qualified","event":"engagement_increased"}
{"timestamp":"2025-08-26 12:32:47.886","level":"info","message":"Conversation state transition requested","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","event":"qualification_criteria_met","triggeredBy":"system","metadata":{"messageId":"6fcc0dd3-d06a-4265-8272-9801ac993258","qualificationReason":"appointment_request"}}
{"timestamp":"2025-08-26 12:32:47.963","level":"warn","message":"No state transition defined for event from state","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","event":"qualification_criteria_met","currentState":"qualified"}
{"timestamp":"2025-08-26 12:32:47.964","level":"info","message":"Inbound lead message stored","correlationId":"no-correlation","service":"mailmind-api","environment":"production","leadId":"eae6bc8b-46d0-46e0-a585-e268fab4304c","messageId":"final-test-1756229566795@test.com","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05"}
{"timestamp":"2025-08-26 12:32:47.965","level":"info","message":"Processing auto-response","correlationId":"no-correlation","service":"mailmind-api","environment":"production","leadId":"eae6bc8b-46d0-46e0-a585-e268fab4304c","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","messageId":"6fcc0dd3-d06a-4265-8272-9801ac993258"}
{"timestamp":"2025-08-26 12:32:51.125","level":"info","message":"AI response generated successfully","correlationId":"no-correlation","service":"mailmind-api","environment":"production","responseLength":251,"model":"openai/gpt-5-chat"}
{"timestamp":"2025-08-26 13:17:53.526","level":"info","message":"Performance metrics","correlationId":"no-correlation","service":"mailmind-api","environment":"production","component":"performance","metrics":{"requestCount":0,"errorCount":0,"averageResponseTime":0,"memoryUsage":{"rss":91078656,"heapTotal":17006592,"heapUsed":14832888,"external":3347576,"arrayBuffers":43495},"uptime":300.346516875}}
