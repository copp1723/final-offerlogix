{"timestamp":"2025-08-26 09:18:05.763","level":"error","message":"State transition failed","correlationId":"no-correlation","service":"mailmind-api","environment":"development","conversationId":"e9e8551a-ee37-4160-ad62-e8112c906bc8","error":{"length":469,"name":"error","severity":"ERROR","code":"23514","detail":"Failing row contains (e9e8551a-ee37-4160-ad62-e8112c906bc8, null, null, Re: Your Toyota Camry Could Be Worth More Than You Think! ðŸš—, engaged, high, 2025-08-25 14:35:10.148, 2025-08-26 14:18:05.773911, 8d67140f-b548-44c2-bbba-8f42efb9457a, null).","schema":"public","table":"conversations","constraint":"conversations_status_values_check","file":"execMain.c","line":"2058","routine":"ExecConstraints"},"errorName":"error","errorMessage":"new row for relation \"conversations\" violates check constraint \"conversations_status_values_check\"","stackTrace":"error: new row for relation \"conversations\" violates check constraint \"conversations_status_values_check\"\n    at /Users/joshcopp/Desktop/Swarm/MailMind/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/joshcopp/Desktop/Swarm/MailMind/node_modules/src/node-postgres/session.ts:104:19)\n    at async DatabaseStorage.updateConversation (/Users/joshcopp/Desktop/Swarm/MailMind/server/storage.ts:444:35)\n    at async ConversationStateManager.transitionState (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/ConversationStateManager.ts:264:7)\n    at async MessageThreadingService.handleMessageStateUpdates (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/MessageThreadingService.ts:458:9)\n    at async MessageThreadingService.processMessage (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/MessageThreadingService.ts:88:7)\n    at async InboundEmailService.handleInboundEmail (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/inbound-email.ts:85:23)\n    at async file:///Users/joshcopp/Desktop/Swarm/MailMind/test-webhook.js:22:5"}
{"timestamp":"2025-08-26 09:41:19.510","level":"error","message":"State transition failed","correlationId":"no-correlation","service":"mailmind-api","environment":"production","conversationId":"741a9d16-5cfc-4010-b94b-bc4a85690a05","error":{"length":473,"name":"error","severity":"ERROR","code":"23514","detail":"Failing row contains (741a9d16-5cfc-4010-b94b-bc4a85690a05, ccc9d43b-cf58-49f1-89e1-2fc366468dac, null, Re: Test Campaign - Reply Testing, engaged, normal, 2025-08-25 20:54:29.37, 2025-08-26 14:41:19.491243, eae6bc8b-46d0-46e0-a585-e268fab4304c, null).","schema":"public","table":"conversations","constraint":"conversations_status_values_check","file":"execMain.c","line":"2058","routine":"ExecConstraints"},"errorName":"error","errorMessage":"new row for relation \"conversations\" violates check constraint \"conversations_status_values_check\"","stackTrace":"error: new row for relation \"conversations\" violates check constraint \"conversations_status_values_check\"\n    at /Users/joshcopp/Desktop/Swarm/MailMind/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async <anonymous> (/Users/joshcopp/Desktop/Swarm/MailMind/node_modules/src/node-postgres/session.ts:104:19)\n    at async DatabaseStorage.updateConversation (/Users/joshcopp/Desktop/Swarm/MailMind/server/storage.ts:444:35)\n    at async ConversationStateManager.transitionState (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/ConversationStateManager.ts:264:7)\n    at async MessageThreadingService.handleMessageStateUpdates (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/MessageThreadingService.ts:458:9)\n    at async MessageThreadingService.processMessage (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/conversation-state/MessageThreadingService.ts:88:7)\n    at async InboundEmailService.handleInboundEmail (/Users/joshcopp/Desktop/Swarm/MailMind/server/services/inbound-email.ts:85:23)\n    at async simulateReplyWebhook (/Users/joshcopp/Desktop/Swarm/MailMind/simulate-reply-webhook.js:163:5)"}
